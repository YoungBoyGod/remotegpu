# 前端重构任务清单

根据后端功能变更和当前前端代码审查，整理出以下待办任务。

## P0: 核心配置与 API 修复

- [ ] **修复 API 请求路径重复问题**
  - 当前 `.env.development` 中 `VITE_API_BASE_URL=/api/v1`
  - 代码中 API 定义又包含了 `/api/v1` 前缀
  - 需统一：要么 BaseURL 为空，要么 API 定义去除前缀。建议 BaseURL 设为 `/api/v1`，API 定义去除 `/api/v1`。
- [ ] **更新 `src/api/auth.ts`**
  - 对齐后端 `/auth/login`, `/auth/refresh` (注意参数名), `/auth/profile`。
- [ ] **更新 `src/api/admin.ts`**
  - 对齐后端机器管理接口 (List, Create, Import, Allocate, Reclaim)。
  - 对齐镜像管理接口 (List, Sync)。
  - 对齐监控接口 (Dashboard Stats, GPU Trend, Realtime, Alerts)。
  - 新增审计日志接口。
- [ ] **更新 `src/api/customer.ts`**
  - 对齐机器列表、连接信息接口。
  - 新增 SSH 密钥管理接口。

## P1: 管理端 (Admin) 页面开发

- [ ] **镜像管理**
  - 迁移/重构 `ImageListView.vue` 到 `views/admin/`。
  - 实现列表展示和“同步镜像”按钮。
- [ ] **监控中心**
  - 迁移/重构 `MonitoringCenterView.vue` 到 `views/admin/`。
  - 对接实时快照数据。
- [ ] **告警中心**
  - 迁移/重构 `AlertCenterView.vue` 到 `views/admin/`。
  - 实现告警列表和确认操作。
- [ ] **审计日志**
  - 新增 `views/admin/AuditLogView.vue`。
  - 展示操作日志列表。

## P2: 客户端 (Customer) 页面开发

- [ ] **SSH 密钥管理**
  - 新增 `views/customer/SSHKeyView.vue`。
  - 实现密钥列表、添加、删除。
- [ ] **任务管理**
  - 新增 `views/customer/TaskListView.vue`。
- [ ] **数据集管理**
  - 新增 `views/customer/DatasetListView.vue`。

## P3: 代码清理与优化

- [ ] **清理 `src/views` 根目录**
  - 将散落在根目录的视图文件分类移动到 `admin` 或 `customer` 目录，或删除无用文件。
- [ ] **更新路由配置**
  - 在 `router/index.ts` 中注册上述新页面。
- [ ] **移除计费相关代码**
  - 检查并隐藏/删除充值、账单相关的菜单和页面。
