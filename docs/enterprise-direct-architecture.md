# 企业网络方案：子域名 + 直接连接（无需frp）

## 方案概述

**适用场景**：企业网络，有固定公网IP，有防火墙管理权限

**核心优势**：
- ✅ 无需frp（配置更简单）
- ✅ 性能更好（无隧道开销）
- ✅ 延迟更低（直接连接）
- ✅ 成本更低（只需云服务器）

---

## 网络架构

```
用户（全国）
  ↓
泛域名 *.gpu.domain.com
  ↓
云服务器（nginx + SSL）
  ↓
企业固定公网IP（如 1.2.3.4）
  ↓
企业防火墙/路由器
  ↓
端口转发规则（1000条）
  ↓
内网GPU机器（192.168.x.x）
```

---

## 访问示例

### GPU1（内网IP: 192.168.10.101）
- SSH: `ssh user@gpu1.gpu.domain.com`
- Jupyter: `https://gpu1-jupyter.gpu.domain.com`
- TensorBoard: `https://gpu1-tensorboard.gpu.domain.com`

### 流量路径
```
用户 → gpu1.gpu.domain.com
     → 云服务器nginx
     → 企业公网IP:2201
     → 防火墙转发
     → 192.168.10.101:22
```

---

## 端口映射规则

| GPU | 内网IP | SSH | Jupyter | TensorBoard | 服务1 | 服务2 |
|-----|--------|-----|---------|-------------|-------|-------|
| GPU1 | 192.168.10.101 | 2201→22 | 8001→8888 | 9001→6006 | 10001→? | 11001→? |
| GPU2 | 192.168.10.102 | 2202→22 | 8002→8888 | 9002→6006 | 10002→? | 11002→? |
| ... | ... | ... | ... | ... | ... | ... |

**说明**：企业公网IP的端口 → 内网GPU的端口

---

## 实施步骤

1. 配置企业防火墙端口转发
2. 配置DNS（泛域名）
3. 配置SSL证书
4. 配置云服务器nginx
5. 测试验证

详见后续文档。
