# RemoteGPU 项目任务清单

> 更新时间：2026-02-07

## 团队成员（第五轮 · 10人组）

| 代号 | 角色 | 职责 |
|------|------|------|
| architect-1 | 架构师 1 | 容器管理/远程桌面架构设计、_wip 模块审查 |
| architect-2 | 架构师 2 | 计费/工作空间架构设计、API 规范审查 |
| backend-1 | 后端开发 1 | 计费模块服务实现 |
| backend-2 | 后端开发 2 | 工作空间/环境管理后端 API |
| backend-3 | 后端开发 3 | 配额校验、索引优化、审计日志增强 |
| frontend-1 | 前端开发 1 | 计费账单页面、支付流程 |
| frontend-2 | 前端开发 2 | 工作空间管理前端页面 |
| frontend-3 | 前端开发 3 | 环境管理前端页面 |
| devops-1 | DevOps 1 | Grafana 仪表板、Agent 部署、监控告警 |
| devops-2 | DevOps 2 | CI/CD 流水线、自动化构建部署 |

---

## 第一轮任务（#1 ~ #42）— 已全部完成

### 架构师
| # | 任务 | 状态 |
|---|------|------|
| 1 | 审查当前架构并输出改进建议 | ✅ 完成 |
| 2 | 定义 Agent 与 Backend 通信协议 | ✅ 完成 |
| 26 | Agent 认证头统一（Authorization + X-Agent-Token） | ✅ 完成 |

### 后端开发 1
| # | 任务 | 状态 |
|---|------|------|
| 3 | Agent 心跳与注册接口 | ✅ 完成 |
| 4 | Agent 任务下发与执行（claim/start/complete） | ✅ 完成 |
| 5 | 任务停止与进程管理 | ✅ 完成 |
| 27 | ReportProgress 路由注册修复 | ✅ 完成 |
| 28 | CompleteTask stdout/stderr 字段修复 | ✅ 完成 |

### 后端开发 2
| # | 任务 | 状态 |
|---|------|------|
| 29 | Redis 监控快照缓存 | ✅ 完成 |
| 30 | GPU 监控数据接入 Prometheus | ✅ 完成 |
| 36 | Harbor 镜像同步服务 | ✅ 完成 |
| 37 | 机器 IP 唯一性校验 | ✅ 完成 |

### 后端开发 3
| # | 任务 | 状态 |
|---|------|------|
| 19 | 客户管理服务增强（配额、统计） | ✅ 完成 |
| 20 | SSH 密钥注入与同步流程 | ✅ 完成 |
| 38 | 系统配置服务完善 | ✅ 完成 |

### 前端开发 1
| # | 任务 | 状态 |
|---|------|------|
| 7 | 管理端仪表盘完善 | ✅ 完成 |
| 11 | 机器管理页面完善 | ✅ 完成 |
| 13 | 客户管理页面完善 | ✅ 完成 |
| 14 | 镜像管理页面 | ✅ 完成 |
| 15 | 监控与告警页面 | ✅ 完成 |

### 前端开发 2
| # | 任务 | 状态 |
|---|------|------|
| 8 | 登录页面与认证流程 | ✅ 完成 |
| 12 | 客户端机器列表 | ✅ 完成 |
| 17 | 任务管理页面 | ✅ 完成 |

### 前端开发 3
| # | 任务 | 状态 |
|---|------|------|
| 18 | 客户端数据集管理页面 | ✅ 完成 |
| 21 | SSH 密钥管理页面 | ✅ 完成 |
| 39 | 平台设置页面 | ✅ 完成 |

### DevOps
| # | 任务 | 状态 |
|---|------|------|
| 9 | 基础设施审查与部署 | ✅ 完成 |
| 31 | Agent 部署脚本 | ✅ 完成 |
| 32 | Nginx 反向代理配置 | ✅ 完成 |
| 33 | Docker 测试环境 | ✅ 完成 |
| 34 | Makefile 构建工具 | ✅ 完成 |

### 测试
| # | 任务 | 状态 |
|---|------|------|
| 10 | 后端核心接口测试 | ✅ 完成 |
| 35 | Agent 通信测试 | ✅ 完成 |

---

## 第二轮任务（#43 ~ #51）— 已全部完成

| # | 任务 | 负责人 | 状态 |
|---|------|--------|------|
| 43 | 修复敏感数据泄露安全漏洞 | architect | ✅ 完成 |
| 44 | 修复 router.go 全量编译错误 | backend-3 | ✅ 完成 |
| 45 | Redis 缓存设备实时状态 | backend-2 | ✅ 完成 |
| 46 | 重新编译部署后端服务 | devops | ✅ 完成 |
| 47 | 前端对接实时通知和设备状态 | frontend-2 | ✅ 完成 |
| 48 | 前端核心页面功能测试（41个测试） | tester | ✅ 完成 |
| 49 | 客户端仪表盘页面完善 | frontend-1 | ✅ 完成 |
| 50 | 存储管理前端页面 | frontend-3 | ✅ 完成 |
| 51 | Agent 系统和 GPU 指标采集 | backend-1 | ✅ 完成 |

---

## 第三轮任务（#52 ~ #67）— 大部分完成

| # | 任务 | 负责人 | 状态 | 依赖 |
|---|------|--------|------|------|
| 52 | 外映射配置后端字段（Nginx/端口） | backend-2 | ✅ 完成 | - |
| 53 | 镜像管理填充种子数据（10条） | backend-1 | ✅ 完成 | - |
| 54 | 重新编译部署 Agent 到 GPU 机器 | devops | ✅ 完成 | - |
| 55 | 验证后端重部署后核心功能 | tester | ✅ 完成 | #54 |
| 56 | 客户端页面功能完善 | frontend-2 | ✅ 完成 | #57 |
| 57 | 前端构建和类型检查修复 | frontend-3 | ✅ 完成 | - |
| 58 | 文档中心前端页面实现 | frontend-1 | ✅ 完成 | - |
| 59 | 外映射配置前端表单实现 | frontend-1 | ✅ 完成 | - |
| 60 | 后端编译验证和 router 冲突修复 | backend-3 | ✅ 完成 | - |
| 61 | 架构师审查本轮代码变更 | architect | ✅ 完成 | - |
| 62 | 客户配额校验逻辑完善 | backend-3 | ⏳ 待确认 | #60 |
| 63 | 数据库 Schema 审查和索引优化（14个索引） | architect | ✅ 完成 | - |
| 64 | Grafana 监控仪表板模板配置 | devops | ⏳ 待确认 | - |
| 65 | 新增功能后端接口测试 | tester | ⏳ 待确认 | - |
| 66 | 计费模块基础服务实现 | backend-2 | ⏳ 待确认 | - |
| 67 | 客户端计费账单页面 | frontend-2 | ⏳ 等待 | #66 |

---

## 第四轮任务（环境恢复后）— 进行中

| # | 任务 | 负责人 | 状态 | 说明 |
|---|------|--------|------|------|
| R1 | SSH 验证并部署 Agent 到两台新机器 | devops | 🔄 进行中 | 129.211.223.220 + 129.211.169.97 |
| R2 | 后端编译验证和 router 冲突修复 | backend-3 | ✅ 完成 | go build + go vet 通过 |
| R3 | 前端构建和类型检查修复 | frontend-3 | ✅ 完成 | type-check + build 通过 |

---

## 环境状态（2026-02-07 21:50）

| 服务 | 状态 | 说明 |
|------|------|------|
| PostgreSQL | ✅ 正常 | 192.168.10.210:5432 |
| 后端 API | ✅ 运行中 | 192.168.10.210:8080，PID 28042 |
| GPU 机器 1.13.92.83 | ❌ 连接超时 | 外部网络问题 |
| GPU 机器 129.211.223.220 | 🔄 待验证 | 已通过 API 添加 |
| GPU 机器 129.211.169.97 | 🔄 待验证 | 已通过 API 添加 |

---

## 第五轮任务（#68 ~ #90）— 已完成

> 启动时间：2026-02-07 22:10 | 完成时间：2026-02-07 23:08

### 架构师组

| # | 任务 | 负责人 | 状态 | 说明 |
|---|------|--------|------|------|
| 68 | 审查 _wip 目录，制定容器管理/远程桌面架构方案 | architect-1 | ✅ 完成 | 输出 docs/architecture/container-remote-desktop.md |
| 69 | 工作空间/环境管理 API 规范 | architect-2 | ✅ 完成 | 输出 docs/architecture/workspace-environment-api.md |
| 82 | 清理计费相关代码和文档 | architect-1 | ✅ 完成 | 用户取消计费功能，已全部清理 |
| 87 | 后端代码质量审查 | architect-1 | ✅ 完成 | 输出 docs/code-review-r5.md，发现 3 个 P0 已修复 |
| 89 | 后端 API 文档注释补充 | architect-2 | ✅ 完成 | 80+ handler 方法补充 swagger 注解 |

### 后端组

| # | 任务 | 负责人 | 状态 | 依赖 | 说明 |
|---|------|--------|------|------|------|
| ~~70~~ | ~~计费模块基础服务实现~~ | ~~backend-1~~ | ❌ 已取消 | 用户取消计费功能 |
| 71 | 工作空间/环境管理后端 API 实现 | backend-2 | ✅ 完成 | service + dao + entity 全部实现 |
| 72 | 客户配额校验逻辑完善 + 索引补建 | backend-3 | ✅ 完成 | notifications 表索引 + 配额超限拦截 |
| 83 | Workspace/Environment Controller + 路由注册 | backend-1 | ✅ 完成 | 15 个 API 端点已注册 |
| 84 | 后端核心服务单元测试 | backend-3 | ✅ 完成 | 13 个测试包全部通过 |

### 前端组

| # | 任务 | 负责人 | 状态 | 依赖 | 说明 |
|---|------|--------|------|------|------|
| ~~73~~ | ~~客户端计费账单页面~~ | ~~frontend-1~~ | ❌ 已取消 | 用户取消计费功能 |
| 74 | 工作空间管理前端页面 | frontend-2 | ✅ 完成 | 列表+详情+成员管理 |
| 75 | 环境管理前端页面 | frontend-3 | ✅ 完成 | 列表+创建+详情+生命周期管理 |
| 86 | 用户个人信息页面 + 仪表板增强 | frontend-1 | ✅ 完成 | ProfileView + 快捷入口 |
| 88 | 前端代码质量审查与修复 | frontend-1 | ✅ 完成 | 消除 any 类型、修复路由顺序 |

### DevOps 组

| # | 任务 | 负责人 | 状态 | 依赖 | 说明 |
|---|------|--------|------|------|------|
| 76 | Grafana 监控仪表板配置 | devops-1 | ✅ 完成 | GPU/CPU/内存/磁盘面板 + 告警规则 |
| 77 | CI/CD 流水线搭建（GitHub Actions） | devops-2 | ✅ 完成 | ci.yml + deploy.yml + actionlint 通过 |
| 85 | 测试环境完善（Agent部署+脚本集成） | devops-2 | ✅ 完成 | healthcheck + .env + Agent 构建 |
| 90 | 项目部署文档编写 | devops-2 | ✅ 完成 | docs/deployment-guide.md（570行） |

### 集成验证

| # | 任务 | 负责人 | 状态 | 依赖 | 说明 |
|---|------|--------|------|------|------|
| 78 | 后端编译验证 + go vet 检查 | devops-1 | ✅ 完成 | 13 个包全部通过 |
| 79 | 前端构建验证 + type-check | devops-1 | ✅ 完成 | build + type-check 通过 |
| 80 | P0 代码问题修复 | architect-1 | ✅ 完成 | 类型断言 panic、ParseUint 错误处理 |
| 81 | 全量功能回归验证 | devops-1 | ✅ 完成 | 修复 7 个测试 schema 问题 |

---

## 待办事项（更新于 2026-02-07 22:10）

1. ~~两台新机器 Agent 部署~~ → 移至 devops-1 #76 一并处理
2. 索引优化脚本 `29_add_missing_indexes.sql` 中 notifications 表索引需补建 → #72
3. ~~第三轮待确认任务~~ → 已纳入第五轮：#70(计费)、#72(配额)、#76(Grafana)、#80(测试)
4. 1.13.92.83 机器恢复后需重新验证 Agent 心跳
5. _wip 目录（docker/vnc/rdp 等）需架构评审后决定是否纳入开发 → #68
