server:
  host: "localhost" # 对外访问域名(用于日志展示)
  port: 8080
  mode: debug # debug, release, test

database:
  host: 127.0.0.1
  port: 5432 # PostgreSQL端口
  user: remotegpu_user
  password: "${DB_PASSWORD}" # 必须修改
  dbname: remotegpu

redis:
  host: 127.0.0.1
  port: 6379
  password: "${REDIS_PASSWORD}" # 必须修改
  db: 0

jwt:
  secret: "${JWT_SECRET}" # 必须修改，至少32字符的随机字符串
  expire_time: 24 # JWT过期时间(小时)

encryption:
  key: "${AES_KEY}" # 必须修改，AES-256 加密密钥(恰好32字节)

log:
  level: debug # debug, info, warn, error
  output_path: "./logs/app.log"
  max_size: 100 # 单个日志文件最大大小(MB)
  max_backups: 10 # 保留的旧日志文件数量
  max_age: 30 # 保留旧日志文件的最大天数

storage:
  max_upload_size: 107374182400
  default: "local-main" # 默认存储的名称
  # 存储后端列表（支持多个同类型）
  backends:
    - name: "local-main"
      type: local
      enabled: true
      path: "./uploads"

    - name: "rustfs-main"
      type: s3
      enabled: false
      endpoint: "http://127.0.0.1:9000"
      access_key: "${S3_ACCESS_KEY}" # 必须修改
      secret_key: "${S3_SECRET_KEY}" # 必须修改
      bucket: "remotegpu"

mail:
  enabled: false
  host: "smtp.example.com"
  port: 587
  user: "alert@example.com"
  password: "${MAIL_PASSWORD}"
  from: "RemoteGPU Alert"
  use_ssl: false

harbor:
  enabled: false
  endpoint: "http://127.0.0.1:8082"
  username: "admin"
  password: "${HARBOR_PASSWORD}" # 必须修改
  project: "remotegpu"

etcd:
  enabled: false
  endpoints:
    - "http://127.0.0.1:2379"
  username: ""
  password: ""
  timeout: 5 # 连接超时时间(秒)

prometheus:
  enabled: false
  endpoint: "http://127.0.0.1:19090"
  port: 19090

jumpserver:
  enabled: false
  endpoint: "http://127.0.0.1:8080"
  api_key: "${JUMPSERVER_API_KEY}" # 必须修改
  org_id: "00000000-0000-0000-0000-000000000002"

nginx:
  enabled: false
  endpoint: "http://localhost"
  port: 80

uptime_kuma:
  enabled: false
  endpoint: "http://127.0.0.1:13001"
  port: 13001

guacamole:
  enabled: false
  endpoint: "http://localhost:8081/guacamole"
  username: "${GUACAMOLE_USER}" # 必须修改
  password: "${GUACAMOLE_PASSWORD}" # 必须修改

k8s:
  enabled: false
  kubeconfig: "" # kubeconfig文件路径
  namespace: "default" # 默认命名空间
  in_cluster: false # 是否在集群内运行

hot_reload:
  enabled: true # 是否启用热更新
  watch_dirs: # 监控的目录
    - "./internal"
    - "./pkg"
    - "./cmd"
    - "./config"
  watch_exts: # 监控的文件扩展名
    - ".go"
    - ".yaml"
    - ".yml"
  exclude_dirs: # 排除的目录
    - "vendor"
    - "node_modules"
    - ".git"
    - "tmp"
    - "logs"
  build_cmd: "go build -o ./tmp/main ./cmd" # 构建命令
  debounce: 1 # 防抖时间(秒)

graceful:
  shutdown_timeout: 10 # 关闭超时时间(秒)
  retry_interval: 5 # 重试间隔(秒)
  max_retries: 0 # 最大重试次数，0表示无限重试

swagger:
  enabled: true # 是否启用Swagger
  title: "RemoteGPU API"
  description: "RemoteGPU 远程GPU管理平台 API 文档"
  version: "1.0.0"
  base_path: "/api/v1"
  openapi_path: "/openapi.yaml" # OpenAPI 文档路径
  schemes:
    - "http"
    - "https"

agent:
  enabled: true
  protocol: "http"      # 默认协议: grpc, http
  grpc_port: 50051      # gRPC 端口
  http_port: 8090       # HTTP 端口
  timeout: 30           # 请求超时(秒)
  retry_count: 3        # 重试次数
  retry_delay: 2        # 重试间隔(秒)
  tls_enabled: false    # 是否启用 TLS

machine_enrollment:
  max_retries: 3
  retry_delay: 10
  skip_collect: true

machine_action:
  max_retries: 3
  retry_delay: 10

heartbeat_monitor:
  enabled: true
  timeout: 180 # 心跳超时时间(秒)，超过此时间未心跳则标记为 offline
  check_interval: 60 # 检查间隔(秒)

metrics_collector:
  enabled: true
  interval: 300 # 采集间隔(秒)，默认5分钟
  retention_days: 30 # 数据保留天数
