# RemoteGPU åŠŸèƒ½æ¸…å•å’Œä¾èµ–å…³ç³»åˆ†æ

## æ–‡æ¡£è¯´æ˜

æœ¬æ–‡æ¡£æ•´ç†äº†é¡¹ç›®çš„æ‰€æœ‰åŠŸèƒ½æ¨¡å—ï¼Œåˆ†æäº†æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå¹¶æä¾›äº†å¤šäººåä½œå¼€å‘çš„ä»»åŠ¡åˆ†é…å»ºè®®ã€‚

**æ›´æ–°æ—¶é—´**: 2026-01-30
**é¡¹ç›®è¿›åº¦**: çº¦ 15-20% å·²å®Œæˆ
**é¢„è®¡æ€»å·¥æ—¶**: çº¦ 300-400 å°æ—¶

---

## ä¸€ã€åŠŸèƒ½æ¨¡å—æ€»è§ˆ

### æ¨¡å—åˆ†ç±»

é¡¹ç›®åˆ†ä¸º **6 ä¸ªæ ¸å¿ƒæ¨¡å—** å’Œ **4 ä¸ªåŸºç¡€è®¾æ–½æ¨¡å—**ï¼š

#### æ ¸å¿ƒä¸šåŠ¡æ¨¡å—
1. **ç”¨æˆ·å’Œæƒé™ç®¡ç†** (User & Permission)
2. **å·¥ä½œç©ºé—´ç®¡ç†** (Workspace)
3. **èµ„æºç®¡ç†** (Resource: Host & GPU)
4. **ç¯å¢ƒç®¡ç†** (Environment) - æ ¸å¿ƒ
5. **é•œåƒå’Œæ•°æ®ç®¡ç†** (Image & Dataset)
6. **è®¡è´¹ç®¡ç†** (Billing)

#### åŸºç¡€è®¾æ–½æ¨¡å—
7. **K8s é›†æˆ** (Kubernetes Integration) - æ ¸å¿ƒ
8. **Harbor é›†æˆ** (Image Registry)
9. **ç›‘æ§é›†æˆ** (Prometheus & Monitoring)
10. **è¿œç¨‹è®¿é—®** (Guacamole & Jumpserver)

---

## äºŒã€å·²å®ŒæˆåŠŸèƒ½æ¸…å•

### âœ… æ¨¡å— 1: ç”¨æˆ·ç®¡ç†ï¼ˆéƒ¨åˆ†å®Œæˆï¼‰

**å®ä½“å±‚ (Entity)**
- âœ… Customer å®ä½“æ¨¡å‹ (`internal/model/entity/user.go`)

**æ•°æ®è®¿é—®å±‚ (DAO)**
- âœ… CustomerDao - CRUD æ“ä½œ
- âœ… ç”¨æˆ·æŸ¥è¯¢ï¼ˆæŒ‰ç”¨æˆ·åã€é‚®ç®±ï¼‰
- âœ… åˆ†é¡µåˆ—è¡¨

**ä¸šåŠ¡é€»è¾‘å±‚ (Service)**
- âœ… UserService - æ³¨å†Œã€ç™»å½•
- âœ… JWT Token ç”Ÿæˆ
- âœ… å¯†ç åŠ å¯†å’ŒéªŒè¯
- âœ… ç”¨æˆ·ä¿¡æ¯è·å–å’Œæ›´æ–°

**API å±‚ (Controller)**
- âœ… UserController - æ³¨å†Œã€ç™»å½•ã€è·å–ä¿¡æ¯ã€æ›´æ–°

**å®Œæˆåº¦**: 70%

---

### âœ… æ¨¡å— 3: èµ„æºç®¡ç†ï¼ˆéƒ¨åˆ†å®Œæˆï¼‰

**å®ä½“å±‚ (Entity)**
- âœ… Host å®ä½“æ¨¡å‹ (`internal/model/entity/host.go`)
- âœ… GPU å®ä½“æ¨¡å‹ (`internal/model/entity/gpu.go`)

**æ•°æ®è®¿é—®å±‚ (DAO)**
- âœ… HostDao - CRUDã€çŠ¶æ€ç®¡ç†ã€å¿ƒè·³
- âœ… GPUDao - CRUDã€çŠ¶æ€ç®¡ç†

**ä¸šåŠ¡é€»è¾‘å±‚ (Service)**
- âœ… HostService - ä¸»æœºç®¡ç†ã€å¿ƒè·³
- âœ… GPUService - GPU ç®¡ç†

**API å±‚ (Controller)**
- âœ… HostController - ä¸»æœº API
- âœ… GPUController - GPU API

**å®Œæˆåº¦**: 60%

---

### âœ… åŸºç¡€è®¾æ–½ï¼ˆå·²å®Œæˆï¼‰

- âœ… æ•°æ®åº“è¿æ¥å’Œè¿ç§» (PostgreSQL)
- âœ… Redis æ”¯æŒ
- âœ… æ—¥å¿—ç³»ç»Ÿ (Zap)
- âœ… ä¸­é—´ä»¶ï¼ˆCORSã€è®¤è¯ã€è§’è‰²ã€æ¢å¤ã€æ—¥å¿—ï¼‰
- âœ… å¥åº·æ£€æŸ¥ç³»ç»Ÿ
- âœ… å­˜å‚¨ç®¡ç†ï¼ˆæœ¬åœ°å’Œ S3ï¼‰
- âœ… çƒ­é‡è½½æ”¯æŒ
- âœ… ä¼˜é›…å¯åŠ¨å’Œå…³é—­

---

## ä¸‰ã€å¾…å®ŒæˆåŠŸèƒ½æ¸…å•

### ğŸ“‹ æ¨¡å— 2: å·¥ä½œç©ºé—´ç®¡ç†ï¼ˆå¾…å®Œæˆï¼‰

**ä¼˜å…ˆçº§**: P0ï¼ˆé«˜ï¼‰
**é¢„ä¼°å·¥æ—¶**: 20 å°æ—¶
**ä¾èµ–**: Customer æ¨¡å‹ï¼ˆå·²å®Œæˆï¼‰

#### åŠŸèƒ½åˆ—è¡¨

**å®ä½“å±‚ (Entity)**
- [ ] Workspace å®ä½“æ¨¡å‹
  - å­—æ®µï¼šID, UUID, Name, OwnerID, Description, Status
  - å…³è”ï¼šOwner (Customer), Members, ResourceQuota
- [ ] WorkspaceMember å®ä½“æ¨¡å‹
  - å­—æ®µï¼šWorkspaceID, CustomerID, Role, JoinedAt
  - å”¯ä¸€çº¦æŸï¼š(WorkspaceID, CustomerID)

**æ•°æ®è®¿é—®å±‚ (DAO)**
- [ ] WorkspaceDao
  - Create, GetByID, GetByUUID, GetByOwnerID
  - Update, Delete, List (åˆ†é¡µ)
- [ ] WorkspaceMemberDao
  - Create, GetByWorkspaceID, GetByCustomerID
  - GetByWorkspaceAndCustomer, Update, Delete

**ä¸šåŠ¡é€»è¾‘å±‚ (Service)**
- [ ] WorkspaceService
  - CreateWorkspace - åˆ›å»ºå·¥ä½œç©ºé—´
  - GetWorkspace - è·å–å·¥ä½œç©ºé—´ä¿¡æ¯
  - UpdateWorkspace - æ›´æ–°å·¥ä½œç©ºé—´
  - DeleteWorkspace - åˆ é™¤å·¥ä½œç©ºé—´
  - AddMember - æ·»åŠ æˆå‘˜
  - RemoveMember - ç§»é™¤æˆå‘˜
  - ListMembers - åˆ—å‡ºæˆå‘˜
  - CheckPermission - æ£€æŸ¥æƒé™

**API å±‚ (Controller)**
- [ ] WorkspaceController
  - POST /api/v1/workspaces - åˆ›å»º
  - GET /api/v1/workspaces/:id - è·å–
  - PUT /api/v1/workspaces/:id - æ›´æ–°
  - DELETE /api/v1/workspaces/:id - åˆ é™¤
  - GET /api/v1/workspaces - åˆ—è¡¨
  - POST /api/v1/workspaces/:id/members - æ·»åŠ æˆå‘˜
  - DELETE /api/v1/workspaces/:id/members/:customer_id - ç§»é™¤æˆå‘˜

**å­ä»»åŠ¡åˆ†è§£**: è§é™„å½• A

---

### ğŸ“‹ æ¨¡å— 2.1: èµ„æºé…é¢ç®¡ç†ï¼ˆå¾…å®Œæˆï¼‰

**ä¼˜å…ˆçº§**: P0ï¼ˆé«˜ï¼‰
**é¢„ä¼°å·¥æ—¶**: 12 å°æ—¶
**ä¾èµ–**: Workspace æ¨¡å‹

#### åŠŸèƒ½åˆ—è¡¨

**å®ä½“å±‚ (Entity)**
- [ ] ResourceQuota å®ä½“æ¨¡å‹
  - å­—æ®µï¼šCustomerID, WorkspaceID, CPU, Memory, GPU, Storage
  - å…³è”ï¼šCustomer, Workspace

**æ•°æ®è®¿é—®å±‚ (DAO)**
- [ ] ResourceQuotaDao
  - Create, GetByCustomerID, GetByWorkspaceID
  - Update, Delete
  - CheckQuota - æ£€æŸ¥é…é¢æ˜¯å¦è¶³å¤Ÿ
  - GetUsedResources - è·å–å·²ä½¿ç”¨èµ„æº
  - GetAvailableQuota - è·å–å¯ç”¨é…é¢

**ä¸šåŠ¡é€»è¾‘å±‚ (Service)**
- [ ] ResourceQuotaService
  - SetQuota - è®¾ç½®é…é¢
  - GetQuota - è·å–é…é¢
  - CheckQuota - æ£€æŸ¥é…é¢
  - UpdateUsedResources - æ›´æ–°å·²ä½¿ç”¨èµ„æº

**API å±‚ (Controller)**
- [ ] ResourceQuotaController
  - GET /api/v1/quotas/:customer_id - è·å–é…é¢
  - PUT /api/v1/quotas/:customer_id - è®¾ç½®é…é¢ï¼ˆç®¡ç†å‘˜ï¼‰
  - GET /api/v1/quotas/:customer_id/usage - è·å–ä½¿ç”¨æƒ…å†µ

**å­ä»»åŠ¡åˆ†è§£**: è§é™„å½• B

---

### ğŸ“‹ æ¨¡å— 4: ç¯å¢ƒç®¡ç†ï¼ˆå¾…å®Œæˆ - æ ¸å¿ƒï¼‰

**ä¼˜å…ˆçº§**: P0ï¼ˆæœ€é«˜ï¼‰
**é¢„ä¼°å·¥æ—¶**: 60 å°æ—¶
**ä¾èµ–**: Workspace, Host, GPU, K8s é›†æˆ

#### åŠŸèƒ½åˆ—è¡¨

**å®ä½“å±‚ (Entity)**
- [ ] Environment å®ä½“æ¨¡å‹
  - å­—æ®µï¼šID, UUID, Name, CustomerID, WorkspaceID, HostID
  - å­—æ®µï¼šImage, Command, GPUIDs, Status, AccessInfo
  - å…³è”ï¼šCustomer, Workspace, Host, GPUs, PortMappings
- [ ] PortMapping å®ä½“æ¨¡å‹
  - å­—æ®µï¼šEnvironmentID, ContainerPort, HostPort, Protocol
  - å”¯ä¸€çº¦æŸï¼š(HostID, HostPort)

**æ•°æ®è®¿é—®å±‚ (DAO)**
- [ ] EnvironmentDao
  - Create, GetByID, GetByUUID
  - GetByCustomerID, GetByWorkspaceID, GetByHostID
  - Update, Delete, List (åˆ†é¡µ)
  - GetByStatus - æŒ‰çŠ¶æ€æŸ¥è¯¢
- [ ] PortMappingDao
  - Create, GetByEnvironmentID
  - AllocatePort - åˆ†é…ç«¯å£
  - ReleasePort - é‡Šæ”¾ç«¯å£
  - Delete, DeleteByEnvironmentID

**ä¸šåŠ¡é€»è¾‘å±‚ (Service)**
- [ ] EnvironmentService
  - CreateEnvironment - åˆ›å»ºç¯å¢ƒï¼ˆæ ¸å¿ƒï¼‰
    - æ£€æŸ¥é…é¢
    - é€‰æ‹©ä¸»æœº
    - åˆ†é… GPU
    - åˆ†é…ç«¯å£
    - åˆ›å»º K8s Pod
    - é…ç½®ç½‘ç»œ
  - GetEnvironment - è·å–ç¯å¢ƒä¿¡æ¯
  - ListEnvironments - åˆ—å‡ºç¯å¢ƒ
  - StartEnvironment - å¯åŠ¨ç¯å¢ƒ
  - StopEnvironment - åœæ­¢ç¯å¢ƒ
  - RestartEnvironment - é‡å¯ç¯å¢ƒ
  - DeleteEnvironment - åˆ é™¤ç¯å¢ƒ
  - GetAccessInfo - è·å–è®¿é—®ä¿¡æ¯
  - GetLogs - è·å–æ—¥å¿—

**API å±‚ (Controller)**
- [ ] EnvironmentController
  - POST /api/v1/environments - åˆ›å»º
  - GET /api/v1/environments/:id - è·å–
  - GET /api/v1/environments - åˆ—è¡¨
  - POST /api/v1/environments/:id/start - å¯åŠ¨
  - POST /api/v1/environments/:id/stop - åœæ­¢
  - POST /api/v1/environments/:id/restart - é‡å¯
  - DELETE /api/v1/environments/:id - åˆ é™¤
  - GET /api/v1/environments/:id/access - è·å–è®¿é—®ä¿¡æ¯
  - GET /api/v1/environments/:id/logs - è·å–æ—¥å¿—

**å­ä»»åŠ¡åˆ†è§£**: è§é™„å½• C

---

### ğŸ“‹ æ¨¡å— 5: é•œåƒç®¡ç†ï¼ˆå¾…å®Œæˆï¼‰

**ä¼˜å…ˆçº§**: P1ï¼ˆä¸­ï¼‰
**é¢„ä¼°å·¥æ—¶**: 24 å°æ—¶
**ä¾èµ–**: Harbor é›†æˆ

#### åŠŸèƒ½åˆ—è¡¨

**å®ä½“å±‚ (Entity)**
- [ ] Image å®ä½“æ¨¡å‹
  - å­—æ®µï¼šID, Name, Tag, Registry, Description
  - å­—æ®µï¼šFramework, Version, GPUSupport, Size
  - å­—æ®µï¼šIsPublic, OwnerID, Status

**æ•°æ®è®¿é—®å±‚ (DAO)**
- [ ] ImageDao
  - Create, GetByID, GetByName
  - Update, Delete, List (åˆ†é¡µ)
  - Search - æœç´¢é•œåƒ
  - GetByFramework - æŒ‰æ¡†æ¶ç­›é€‰

**ä¸šåŠ¡é€»è¾‘å±‚ (Service)**
- [ ] ImageService
  - CreateImage - åˆ›å»ºé•œåƒè®°å½•
  - GetImage - è·å–é•œåƒä¿¡æ¯
  - ListImages - åˆ—å‡ºé•œåƒ
  - SearchImages - æœç´¢é•œåƒ
  - DeleteImage - åˆ é™¤é•œåƒ
  - SyncFromHarbor - ä» Harbor åŒæ­¥

**API å±‚ (Controller)**
- [ ] ImageController
  - POST /api/v1/images - åˆ›å»º
  - GET /api/v1/images/:id - è·å–
  - GET /api/v1/images - åˆ—è¡¨
  - GET /api/v1/images/search - æœç´¢
  - DELETE /api/v1/images/:id - åˆ é™¤

**å­ä»»åŠ¡åˆ†è§£**: è§é™„å½• D

---

### ğŸ“‹ æ¨¡å— 6: è®¡è´¹ç®¡ç†ï¼ˆå¾…å®Œæˆï¼‰

**ä¼˜å…ˆçº§**: P2ï¼ˆä½ï¼‰
**é¢„ä¼°å·¥æ—¶**: 32 å°æ—¶
**ä¾èµ–**: Environment æ¨¡å‹

#### åŠŸèƒ½åˆ—è¡¨

**å®ä½“å±‚ (Entity)**
- [ ] BillingRecord å®ä½“æ¨¡å‹
  - å­—æ®µï¼šCustomerID, EnvironmentID, ResourceType
  - å­—æ®µï¼šQuantity, UnitPrice, TotalAmount, StartTime, EndTime
- [ ] Invoice å®ä½“æ¨¡å‹
  - å­—æ®µï¼šCustomerID, BillingPeriod, TotalAmount, Status

**æ•°æ®è®¿é—®å±‚ (DAO)**
- [ ] BillingRecordDao
  - Create, GetByID, GetByCustomerID
  - GetByEnvironmentID, List (åˆ†é¡µ)
  - GetByDateRange - æŒ‰æ—¥æœŸèŒƒå›´æŸ¥è¯¢
- [ ] InvoiceDao
  - Create, GetByID, GetByCustomerID
  - Update, List (åˆ†é¡µ)

**ä¸šåŠ¡é€»è¾‘å±‚ (Service)**
- [ ] BillingService
  - RecordUsage - è®°å½•ä½¿ç”¨
  - CalculateCost - è®¡ç®—è´¹ç”¨
  - GenerateInvoice - ç”Ÿæˆè´¦å•
  - GetBillingRecords - è·å–è®¡è´¹è®°å½•
  - GetInvoices - è·å–è´¦å•

**API å±‚ (Controller)**
- [ ] BillingController
  - GET /api/v1/billing/records - è®¡è´¹è®°å½•
  - GET /api/v1/billing/invoices - è´¦å•åˆ—è¡¨
  - GET /api/v1/billing/invoices/:id - è´¦å•è¯¦æƒ…

**å­ä»»åŠ¡åˆ†è§£**: è§é™„å½• E

---

### ğŸ“‹ æ¨¡å— 7: K8s é›†æˆï¼ˆå¾…å®Œæˆ - æ ¸å¿ƒï¼‰

**ä¼˜å…ˆçº§**: P0ï¼ˆæœ€é«˜ï¼‰
**é¢„ä¼°å·¥æ—¶**: 40 å°æ—¶
**ä¾èµ–**: æ— ï¼ˆåŸºç¡€è®¾æ–½ï¼‰

#### åŠŸèƒ½åˆ—è¡¨

**åŸºç¡€è®¾æ–½å±‚ (pkg/k8s)**
- [ ] K8s å®¢æˆ·ç«¯å°è£…
  - InitClient - åˆå§‹åŒ–å®¢æˆ·ç«¯
  - GetClient - è·å–å®¢æˆ·ç«¯
- [ ] Pod ç®¡ç†
  - CreatePod - åˆ›å»º Pod
  - GetPod - è·å– Pod ä¿¡æ¯
  - DeletePod - åˆ é™¤ Pod
  - GetPodLogs - è·å– Pod æ—¥å¿—
  - WatchPodStatus - ç›‘æ§ Pod çŠ¶æ€
- [ ] Service ç®¡ç†
  - CreateService - åˆ›å»º Service
  - DeleteService - åˆ é™¤ Service
- [ ] ConfigMap ç®¡ç†
  - CreateConfigMap - åˆ›å»ºé…ç½®
  - DeleteConfigMap - åˆ é™¤é…ç½®
- [ ] PVC ç®¡ç†
  - CreatePVC - åˆ›å»ºæŒä¹…å·
  - DeletePVC - åˆ é™¤æŒä¹…å·

**é›†æˆåˆ° EnvironmentService**
- [ ] ç¯å¢ƒåˆ›å»ºæ—¶åˆ›å»º K8s èµ„æº
- [ ] ç¯å¢ƒåˆ é™¤æ—¶æ¸…ç† K8s èµ„æº
- [ ] ç¯å¢ƒçŠ¶æ€åŒæ­¥

**å­ä»»åŠ¡åˆ†è§£**: è§é™„å½• F

---

### ğŸ“‹ æ¨¡å— 8: Harbor é›†æˆï¼ˆå¾…å®Œæˆï¼‰

**ä¼˜å…ˆçº§**: P1ï¼ˆä¸­ï¼‰
**é¢„ä¼°å·¥æ—¶**: 16 å°æ—¶
**ä¾èµ–**: æ— ï¼ˆåŸºç¡€è®¾æ–½ï¼‰

#### åŠŸèƒ½åˆ—è¡¨

**åŸºç¡€è®¾æ–½å±‚ (pkg/harbor)**
- [ ] Harbor å®¢æˆ·ç«¯å°è£…
  - InitClient - åˆå§‹åŒ–å®¢æˆ·ç«¯
  - GetClient - è·å–å®¢æˆ·ç«¯
- [ ] é•œåƒç®¡ç†
  - ListImages - åˆ—å‡ºé•œåƒ
  - GetImage - è·å–é•œåƒä¿¡æ¯
  - DeleteImage - åˆ é™¤é•œåƒ
  - SearchImages - æœç´¢é•œåƒ
- [ ] é¡¹ç›®ç®¡ç†
  - CreateProject - åˆ›å»ºé¡¹ç›®
  - GetProject - è·å–é¡¹ç›®

**é›†æˆåˆ° ImageService**
- [ ] ä» Harbor åŒæ­¥é•œåƒåˆ—è¡¨
- [ ] é•œåƒä¿¡æ¯æŸ¥è¯¢

**å­ä»»åŠ¡åˆ†è§£**: è§é™„å½• G

---

### ğŸ“‹ æ¨¡å— 9: ç›‘æ§é›†æˆï¼ˆå¾…å®Œæˆï¼‰

**ä¼˜å…ˆçº§**: P2ï¼ˆä½ï¼‰
**é¢„ä¼°å·¥æ—¶**: 24 å°æ—¶
**ä¾èµ–**: Environment æ¨¡å‹

#### åŠŸèƒ½åˆ—è¡¨

**åŸºç¡€è®¾æ–½å±‚ (pkg/prometheus)**
- [ ] Prometheus å®¢æˆ·ç«¯å°è£…
- [ ] æŒ‡æ ‡é‡‡é›†
  - ç¯å¢ƒèµ„æºä½¿ç”¨
  - GPU ä½¿ç”¨ç‡
  - ä¸»æœºçŠ¶æ€

**ç›‘æ§ Service**
- [ ] MonitoringService
  - GetMetrics - è·å–æŒ‡æ ‡
  - GetResourceUsage - è·å–èµ„æºä½¿ç”¨
  - GetAlerts - è·å–å‘Šè­¦

**å­ä»»åŠ¡åˆ†è§£**: è§é™„å½• H

---

### ğŸ“‹ æ¨¡å— 10: è¿œç¨‹è®¿é—®ï¼ˆå¾…å®Œæˆï¼‰

**ä¼˜å…ˆçº§**: P2ï¼ˆä½ï¼‰
**é¢„ä¼°å·¥æ—¶**: 20 å°æ—¶
**ä¾èµ–**: Environment æ¨¡å‹

#### åŠŸèƒ½åˆ—è¡¨

**åŸºç¡€è®¾æ–½å±‚ (pkg/guacamole)**
- [ ] Guacamole å®¢æˆ·ç«¯å°è£…
- [ ] è¿æ¥ç®¡ç†
  - CreateConnection - åˆ›å»ºè¿æ¥
  - DeleteConnection - åˆ é™¤è¿æ¥
  - GetConnectionURL - è·å–è¿æ¥ URL

**é›†æˆåˆ° EnvironmentService**
- [ ] ç¯å¢ƒåˆ›å»ºæ—¶åˆ›å»ºè¿œç¨‹è®¿é—®è¿æ¥
- [ ] ç¯å¢ƒåˆ é™¤æ—¶æ¸…ç†è¿æ¥

**å­ä»»åŠ¡åˆ†è§£**: è§é™„å½• I

---

## å››ã€åŠŸèƒ½ä¾èµ–å…³ç³»å›¾

### ä¾èµ–å±‚çº§

```
Level 0 (åŸºç¡€è®¾æ–½ - æ— ä¾èµ–)
â”œâ”€â”€ Customer æ¨¡å‹ âœ…
â”œâ”€â”€ æ•°æ®åº“ã€Redisã€æ—¥å¿— âœ…
â”œâ”€â”€ K8s é›†æˆ â³
â””â”€â”€ Harbor é›†æˆ â³

Level 1 (ä¾èµ– Level 0)
â”œâ”€â”€ Workspace æ¨¡å‹ â³ (ä¾èµ–: Customer)
â”œâ”€â”€ Host æ¨¡å‹ âœ…
â””â”€â”€ GPU æ¨¡å‹ âœ… (ä¾èµ–: Host)

Level 2 (ä¾èµ– Level 1)
â”œâ”€â”€ ResourceQuota æ¨¡å‹ â³ (ä¾èµ–: Workspace, Customer)
â””â”€â”€ Image æ¨¡å‹ â³ (ä¾èµ–: Harbor)

Level 3 (ä¾èµ– Level 2)
â””â”€â”€ Environment æ¨¡å‹ â³ (ä¾èµ–: Workspace, Host, GPU, K8s)

Level 4 (ä¾èµ– Level 3)
â”œâ”€â”€ PortMapping æ¨¡å‹ â³ (ä¾èµ–: Environment)
â”œâ”€â”€ BillingRecord æ¨¡å‹ â³ (ä¾èµ–: Environment)
â””â”€â”€ ç›‘æ§é›†æˆ â³ (ä¾èµ–: Environment)
```

### å…³é”®è·¯å¾„

**æœ€é•¿ä¾èµ–é“¾**:
```
Customer â†’ Workspace â†’ ResourceQuota â†’ Environment â†’ PortMapping
```

**æ ¸å¿ƒåŠŸèƒ½ä¾èµ–**:
```
Environment åˆ›å»ºä¾èµ–:
â”œâ”€â”€ Workspace (ç”¨æˆ·æƒé™)
â”œâ”€â”€ ResourceQuota (é…é¢æ£€æŸ¥)
â”œâ”€â”€ Host (ä¸»æœºé€‰æ‹©)
â”œâ”€â”€ GPU (GPU åˆ†é…)
â””â”€â”€ K8s (å®¹å™¨åˆ›å»º)
```

---

## äº”ã€å¹¶è¡Œå¼€å‘ç­–ç•¥

### å¯å¹¶è¡Œå¼€å‘çš„æ¨¡å—

**ç¬¬ä¸€æ‰¹ï¼ˆæ— ä¾èµ–ï¼Œå¯ç«‹å³å¼€å§‹ï¼‰**:
- âœ… Customer æ¨¡å‹ï¼ˆå·²å®Œæˆï¼‰
- âœ… Host æ¨¡å‹ï¼ˆå·²å®Œæˆï¼‰
- âœ… GPU æ¨¡å‹ï¼ˆå·²å®Œæˆï¼‰
- â³ K8s é›†æˆ
- â³ Harbor é›†æˆ

**ç¬¬äºŒæ‰¹ï¼ˆä¾èµ–ç¬¬ä¸€æ‰¹ï¼‰**:
- â³ Workspace æ¨¡å‹ï¼ˆä¾èµ– Customerï¼‰
- â³ Image æ¨¡å‹ï¼ˆä¾èµ– Harborï¼‰

**ç¬¬ä¸‰æ‰¹ï¼ˆä¾èµ–ç¬¬äºŒæ‰¹ï¼‰**:
- â³ ResourceQuota æ¨¡å‹ï¼ˆä¾èµ– Workspaceï¼‰

**ç¬¬å››æ‰¹ï¼ˆä¾èµ–ç¬¬ä¸‰æ‰¹ï¼‰**:
- â³ Environment æ¨¡å‹ï¼ˆä¾èµ– Workspace, Host, GPU, K8sï¼‰

**ç¬¬äº”æ‰¹ï¼ˆä¾èµ–ç¬¬å››æ‰¹ï¼‰**:
- â³ PortMapping æ¨¡å‹ï¼ˆä¾èµ– Environmentï¼‰
- â³ BillingRecord æ¨¡å‹ï¼ˆä¾èµ– Environmentï¼‰
- â³ ç›‘æ§é›†æˆï¼ˆä¾èµ– Environmentï¼‰

---

## å…­ã€é£é™©å’Œé˜»å¡ç‚¹

### é«˜é£é™©ä»»åŠ¡

1. **K8s é›†æˆ** (40 å°æ—¶)
   - é£é™©ï¼šæŠ€æœ¯å¤æ‚åº¦é«˜ï¼Œå¯èƒ½é‡åˆ°ç½‘ç»œã€æƒé™é—®é¢˜
   - å½±å“ï¼šé˜»å¡ Environment æ¨¡å—
   - ç¼“è§£ï¼šæå‰å‡†å¤‡ K8s æµ‹è¯•ç¯å¢ƒï¼Œç¼–å†™è¯¦ç»†æ–‡æ¡£

2. **Environment åˆ›å»º** (60 å°æ—¶)
   - é£é™©ï¼šæ¶‰åŠå¤šä¸ªæ¨¡å—é›†æˆï¼Œäº‹åŠ¡å¤„ç†å¤æ‚
   - å½±å“ï¼šæ ¸å¿ƒåŠŸèƒ½æ— æ³•ä½¿ç”¨
   - ç¼“è§£ï¼šåˆ†é˜¶æ®µå¼€å‘ï¼Œå…ˆå®ç°åŸºç¡€åŠŸèƒ½

3. **GPU å¹¶å‘åˆ†é…** (å·²å®ŒæˆåŸºç¡€ï¼Œéœ€å®Œå–„)
   - é£é™©ï¼šå¹¶å‘å†²çªå¯¼è‡´é‡å¤åˆ†é…
   - å½±å“ï¼šèµ„æºç®¡ç†æ··ä¹±
   - ç¼“è§£ï¼šä½¿ç”¨æ•°æ®åº“è¡Œé”å’Œäº‹åŠ¡

### é˜»å¡ç‚¹

- **Workspace é˜»å¡ ResourceQuota**: éœ€è¦å…ˆå®Œæˆ Workspace
- **K8s é˜»å¡ Environment**: éœ€è¦å…ˆå®Œæˆ K8s é›†æˆ
- **Environment é˜»å¡ Billing**: éœ€è¦å…ˆå®Œæˆ Environment

---

## ä¸ƒã€å¼€å‘ä¼˜å…ˆçº§å»ºè®®

### P0 (æœ€é«˜ä¼˜å…ˆçº§ - æ ¸å¿ƒåŠŸèƒ½)

1. **K8s é›†æˆ** (40 å°æ—¶) - åŸºç¡€è®¾æ–½
2. **Workspace æ¨¡å‹** (20 å°æ—¶) - ç”¨æˆ·æƒé™åŸºç¡€
3. **ResourceQuota æ¨¡å‹** (12 å°æ—¶) - é…é¢ç®¡ç†
4. **Environment æ¨¡å‹** (60 å°æ—¶) - æ ¸å¿ƒä¸šåŠ¡

**æ€»è®¡**: 132 å°æ—¶

### P1 (é«˜ä¼˜å…ˆçº§ - é‡è¦åŠŸèƒ½)

5. **Harbor é›†æˆ** (16 å°æ—¶) - é•œåƒç®¡ç†åŸºç¡€
6. **Image æ¨¡å‹** (24 å°æ—¶) - é•œåƒç®¡ç†

**æ€»è®¡**: 40 å°æ—¶

### P2 (ä¸­ä¼˜å…ˆçº§ - å¢å¼ºåŠŸèƒ½)

7. **Billing æ¨¡å‹** (32 å°æ—¶) - è®¡è´¹ç®¡ç†
8. **ç›‘æ§é›†æˆ** (24 å°æ—¶) - ç›‘æ§å‘Šè­¦
9. **è¿œç¨‹è®¿é—®** (20 å°æ—¶) - ç”¨æˆ·ä½“éªŒ

**æ€»è®¡**: 76 å°æ—¶

---

## å…«ã€æ€»å·¥æ—¶ä¼°ç®—

| ä¼˜å…ˆçº§ | æ¨¡å—æ•° | é¢„ä¼°å·¥æ—¶ | ç´¯è®¡å·¥æ—¶ |
|--------|--------|----------|----------|
| P0     | 4      | 132 å°æ—¶ | 132 å°æ—¶ |
| P1     | 2      | 40 å°æ—¶  | 172 å°æ—¶ |
| P2     | 3      | 76 å°æ—¶  | 248 å°æ—¶ |
| **æ€»è®¡** | **9** | **248 å°æ—¶** | - |

**åŠ ä¸Šå·²å®Œæˆçš„å·¥æ—¶**: çº¦ 50 å°æ—¶
**é¡¹ç›®æ€»å·¥æ—¶**: çº¦ 300 å°æ—¶

**å›¢é˜Ÿé…ç½®å»ºè®®**:
- 3-4 äººå›¢é˜Ÿ: çº¦ 8-10 å‘¨
- 5-6 äººå›¢é˜Ÿ: çº¦ 5-7 å‘¨

---

## é™„å½•ï¼šè¯¦ç»†å­ä»»åŠ¡åˆ†è§£

è§åç»­æ–‡æ¡£ï¼š
- é™„å½• A: Workspace æ¨¡å—å­ä»»åŠ¡
- é™„å½• B: ResourceQuota æ¨¡å—å­ä»»åŠ¡
- é™„å½• C: Environment æ¨¡å—å­ä»»åŠ¡
- é™„å½• D: Image æ¨¡å—å­ä»»åŠ¡
- é™„å½• E: Billing æ¨¡å—å­ä»»åŠ¡
- é™„å½• F: K8s é›†æˆå­ä»»åŠ¡
- é™„å½• G: Harbor é›†æˆå­ä»»åŠ¡
- é™„å½• H: ç›‘æ§é›†æˆå­ä»»åŠ¡
- é™„å½• I: è¿œç¨‹è®¿é—®å­ä»»åŠ¡

---

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0
**æœ€åæ›´æ–°**: 2026-01-30
**ä¸‹æ¬¡å®¡æŸ¥**: æ¯å‘¨æ›´æ–°
